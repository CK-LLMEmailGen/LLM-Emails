<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mail Generation</title>
    <style>
        div{
                margin-left: 20%;
                margin-right: 20%;
                /* Add more styles as needed */
            }
    </style>
</head>
<body>
    

    <h1>Mail Generation</h1>
    <form id="textForm">
        <label for="source">Source Name:</label>
        <select id="source" name="source">
            <option value="mondee">Mondee</option>
            <option value="crowdstrike">CrowdStrike</option>
            <option value="Option 3">Option 3</option>
            <!-- Add more options as needed -->
        </select><br><br>
        
        <label for="destination">Destination:</label>
        <select id="destination" name="destination">
            <option value="crowdstrike">CrowdStrike</option>
            <option value="mondee">Mondee</option>
            <option value="Option 3">Option 3</option>
            <!-- Add more options as needed -->
        </select><br><br>
        
        <label for="target">Target Name:</label>
        <input type="text" id="target" name="target"><br><br>
        
        <label for="prompt">Enter Prompt:</label>
        <input type="text" id="prompt" name="prompt"><br><br>
        <label for="tone">Tone:</label>
        <select id="tone" name="tone">
            <option value="formal">Formal</option>
            <option value="semi_formal">Semi-Formal</option>
            <option value="Informal">Informal</option>
            
        </select><br><br>
        
        <button type="button" onclick="generateText()">Generate</button>
        
    </form>
    <br>
    <div id="output"></div>
   
    <!-- <script>
    async function generateText() {
        const source = document.getElementById("source").value;
        const destination = document.getElementById("destination").value;
        const target = document.getElementById("target").value;
        const promptText = document.getElementById("prompt").value;

        // Make an API call to the FastAPI backend with selected values
        fetch('/generate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                source: source,
                destination: destination,
                target: target,
                prompt: promptText
            })
        });
        
    const responseData = await response.text();
    document.getElementById('output').innerHTML = responseData;
    }
</script> -->
<script>
    async function generateText() {
        const source = document.getElementById("source").value;
        const destination = document.getElementById("destination").value;
        const target = document.getElementById("target").value;
        const promptText = document.getElementById("prompt").value;

        try {
            const response = await fetch('/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    source: source,
                    destination: destination,
                    target: target,
                    prompt: promptText
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            let responseData = await response.text();
            console.log(responseData);
            responseData.replace(/"/g, ' ');
            document.getElementById('output').innerHTML = responseData; // Display the response in the output div
        } catch (error) {
            console.error('Error:', error);
        }
    }
</script>

</body>
</html>
