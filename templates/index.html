<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FastAPI HTML Page</title>
</head>
<body>
    <h1>Text Generation</h1>
    <form id="textForm">
        <label for="source">Source Name:</label>
        <select id="source" name="source">
            <option value="mondee">Mondee</option>
            <option value="crowdstrike">CrowdStrike</option>
            <option value="Option 3">Option 3</option>
            <!-- Add more options as needed -->
        </select><br><br>
        
        <label for="destination">Destination:</label>
        <select id="destination" name="destination">
            <option value="crowdstrike">CrowdStrike</option>
            <option value="mondee">Mondee</option>
            <option value="Option 3">Option 3</option>
            <!-- Add more options as needed -->
        </select><br><br>
        
        <label for="target">Target Name:</label>
        <input type="text" id="target" name="target"><br><br>
        
        <label for="prompt">Enter Prompt:</label>
        <input type="text" id="prompt" name="prompt"><br><br>
        
        <button type="button" onclick="generateText()">Generate</button>
        <div id="output"></div>

       
    </form>
    <br>
    <div id="output"></div>
    <script>
    function generateText() {
        const source = document.getElementById("source").value;
        const destination = document.getElementById("destination").value;
        const target = document.getElementById("target").value;
        const promptText = document.getElementById("prompt").value;

        // Make an API call to the FastAPI backend with selected values
        fetch('/generate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                source: source,
                destination: destination,
                target: target,
                prompt: promptText
            })
        })
        .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.text(); // Retrieve the response as text
    })
    .then(text => {
        // Access the output text and display it on the webpage
        const outputDiv = document.getElementById("output");
        outputDiv.innerHTML = `<p>${text}</p>`;
    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
        // Handle errors or display an error message on the webpage
    });
    }
</script>

</body>
</html>
